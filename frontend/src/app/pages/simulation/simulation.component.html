<div class="simulation-container">
  <h2>Real-Time Prediction Stream</h2>

  <button class="start-btn" (click)="startSimulation()" [disabled]="simulationStarted">
    {{ simulationStarted ? 'Streaming...' : 'Start Simulation' }}
  </button>

  <!-- Live Stats -->
  <div class="stats-panel">
    <div>Total: {{ total }}</div>
    <div>Pass: {{ pass }}</div>
    <div>Fail: {{ fail }}</div>
    <div>Avg. Confidence: {{ avgConfidence | number: '1.2-2' }}%</div>
  </div>

  <!-- Charts -->
  <div class="chart-row">
    <!-- Line Chart: Quality Score -->
    <div class="chart-box">
      <h3>Pass Percentage (Quality Score)</h3>
      <canvas baseChart
              [datasets]="[{ data: qualityScoreData, label: 'Pass %' }]"
              [labels]="qualityScoreLabels"
              [options]="{ responsive: true }"
              [legend]="true"
              [type]="'line'">
      </canvas>
    </div>

    <!-- Doughnut Chart: Confidence -->
    <div class="chart-box">
      <h3>Avg Confidence Score</h3>
      <canvas baseChart
              [data]="doughnutChartData"
              [labels]="['Confidence', 'Remaining']"
              [type]="'doughnut'"
              [options]="{ responsive: true }">
      </canvas>
    </div>
  </div>

  <!-- Table -->
  <table class="prediction-table">
    <thead>
      <tr>
        <th>Timestamp</th>
        <th>Sample ID</th>
        <th>Prediction</th>
        <th>Confidence</th>
        <th>Label</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let msg of messages">
        <td>{{ msg.timestamp }}</td>
        <td>{{ msg.sample_id }}</td>
        <td>{{ msg.prediction }}</td>
        <td>{{ msg.confidence | number: '1.2-4' }}</td>
        <td>{{ msg.label }}</td>
      </tr>
    </tbody>
  </table>
</div>